# yaml-language-server: $schema=https://linkml.io/linkml-model/linkml_model/jsonschema/meta.schema.json
id: http://kbase.github.io/cdm-schema/linkml/cdm_base
name: cdm_base
description: Base classes, types, etc., for the CDM schema.

imports:
  - linkml:types
  - cdm_types

prefixes:
  kb_cdm: http://kbase.github.io/cdm-schema/linkml/
  linkml: https://w3id.org/linkml/
  mixs: https://genomicsstandardsconsortium.github.io/mixs/
  schema: http://schema.org/

default_curi_maps:
  - semweb_context
default_prefix: kb_cdm
default_range: string

slots:
  entity_id:
    description: Internal (CDM) unique identifier for an entity.
    required: true
    range: cdm_id
  description:
    description: Brief textual definition or description.
    range: string
  hash:
    description: A hash value generated from one or more object attributes that serves to ensure the entity is unique.
    range: string
  identifier:
    description: Fully-qualified URL or CURIE used as an identifier for an entity.
    range: uriorcurie
    required: true
    slot_uri: schema:identifier
    examples:
      - value: "UniProt:Q8KCD6"
      - value: "EC:5.2.3.14"
  name:
    description: A string used as a name or title.
    range: string
    slot_uri: schema:name
  source:
    description: The source for a specific piece of information; should be a CDM internal ID of a source in the DataSource table.
    range: cdm_data_source_id

classes:

  Any:
    class_uri: linkml:Any
    abstract: true
    description: Used as a range for slots that have more than one possible type.

  Table:
    abstract: true
    tree_root: true
    description: root class for all schema entities

  LinkerTable:
    abstract: true
    is_a: Table
    description: tables for linking between tables

  # schema classes
  Entity:
    is_a: Table
    slots:
      - entity_id
    slot_usage:
      entity_id:
        identifier: true
    attributes:
      entity_type:
        description: The class of the entity. Must be a valid CDM class.
        required: true
        range: EntityType
      data_source_id:
        description: The source from which the data came.
        range: cdm_id
      data_source_entity_id:
        description: The primary, ideally unique, ID of the entity at the data source.
        range: uriorcurie
      data_source_created:
        description: Date/timestamp for when the entity was created or added to the data source.
        required: true
        range: iso8601
      data_source_updated:
        description: Date/timestamp for when the entity was updated in the data source.
        range: iso8601
      created:
        aliases:
          - cdm_created
          - cdm_entity_created
          - entity_created
        description: Date/timestamp for when the entity was created or added to the CDM.
        required: true
        range: iso8601
      updated:
        aliases:
          - cdm_updated
          - cdm_entity_updated
          - entity_updated
        description: Date/timestamp for when the entity was updated in the CDM.
        required: true
        range: iso8601
    description: An entity in the CDM.

  Identifier:
    is_a: Table
    slots:
      - entity_id
      - identifier
      - description
      - source
    slot_usage:
      description:
        description: Brief description of the identifier.
    attributes:
      relationship:
        description: Relationship between this identifier and the entity in the `entity_id` field. If absent, it is assumed that the identifier represents the same entity in another data source.
    description: |
      A string used as a resolvable (external) identifier for an entity. This should be a CURIE in the form `<database_prefix>:<local_identifier>`. [Bioregistry](https://bioregistry.io) is used as the canonical reference for CURIE database prefixes; please use the prefix exactly as written in the Bioregistry entry.

      If the string cannot be resolved to an URL, it should be added to the `Name` table instead.

      This table is used for capturing external IDs. The internal CDM identifier should be used in the *_id field (e.g. feature_id, protein_id, contig_collection_id).

  Name:
    is_a: Table
    slots:
      - entity_id
      - name
      - description
      - source
    slot_usage:
      description:
        description: Brief description of the name and/or its relationship to the entity.
        examples:
        - value: "UniProt recommended full name"
      name:
        description: The string used as a name.
        required: true
        slot_uri: schema:name
        examples:
        - value: Heat-inducible transcription repressor HrcA
        - value: Uncharacterized protein 002R
    description: |
      A string used as the name or label for an entity. This may be a primary name, alternative name, synonym, acronym, or any other label used to refer to an entity.

      Identifiers that look like CURIEs or database references, but which cannot be resolved using [Bioregistry](https://bioregistry.io) or [identifiers.org](https://identifiers.org) should be added to the `Name` table.

enums:
  EntityType:
    description: The type of an entity. Must be represented by a table in the CDM schema.
    permissible_values:
      Cluster:
        meaning: kb_cdm:Cluster
      Contig:
        meaning: kb_cdm:Contig
      ContigCollection:
        meaning: kb_cdm:ContigCollection
      EncodedFeature:
        meaning: kb_cdm:EncodedFeature
        description: The output of transcribing a sequence; includes mRNA, tRNA, etc.
      Feature:
        meaning: kb_cdm:Feature
      Protein:
        meaning: kb_cdm:Protein
      Sample:
        meaning: kb_cdm:Sample
      Contributor:
        meaning: kb_cdm:Contributor
      Project:
        meaning: kb_cdm:Project
      Experiment:
        meaning: kb_cdm:Experiment
